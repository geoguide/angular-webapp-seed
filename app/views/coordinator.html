<section id="coordinator-info">

	<h3 id="no-data" ng-show="coord.error && !coord.loading" class="ng-cloak text-center ng-hide">Coordinator #<span ng-bind="coord.coordId"></span> Does Not Exist</h3>

	<div class="text-center row" ng-show="coord.loading">
		<div class="col-md-12 form-group">
		  <i class="fa fa-refresh fa-spin fa-4x"></i>
		</div>
	</div>

	<div ng-hide="coord.loading || coord.error" class="ng-hide">
		<h3>Coordinator: <strong><span ng-bind="coord.coordinatorData.first_name"></span> <span ng-bind="coord.coordinatorData.last_name"></span></strong></h3>
		<hr />
		<form id="coordinator-form" ng-submit="coord.save()" ng-show="coord.coordinatorData" class="ng-cloak">
			<div class="row">
				<div class="form-group col-md-3">
					<label>First Name</label>
					<input type="text" class="form-control" id="first-name" placeholder="First Name" ng-model="coord.coordinatorData.first_name">
				</div>
				<div class="form-group col-md-2">
					<label>Middle</label>
					<input type="text" class="form-control" id="middle-name" placeholder="Middle Name" ng-model="coord.coordinatorData.middle_name">
				</div>
				<div class="col-md-3 form-group">
					<label>Last Name</label>
					<input type="text" class="form-control" id="last-name" placeholder="Last Name" ng-model="coord.coordinatorData.last_name">
				</div>
				<div class="col-md-2 form-group">
					<label>Created</label>
					<div ng-bind="coord.coordinatorData.date_created"></div>
				</div>
			</div>
			<div class="row">
				<div class="form-group col-md-4">
					<label>Business Address 1</label>
					<input type="text" class="form-control" placeholder="Address" ng-model="coord.coordinatorData.home_address">
				</div>
				<div class="form-group col-md-4">
					<label>Business Address 2</label>
					<input type="text" class="form-control" placeholder="Address 2" ng-model="coord.coordinatorData.home_address_2">
				</div>
			</div>
			<div class="row">
				<div class="form-group col-md-4">
					<label>City</label>
					<input type="text" class="form-control" placeholder="City" ng-model="coord.coordinatorData.home_city">
				</div>
				<div class="col-md-1 form-group">
					<label>State</label>
					<select class="form-control" ng-model="coord.coordinatorData.home_state" ng-options="state.abbreviation as state.abbreviation for state in appCtrl.usStates">
					</select>
				</div>
				<div class="form-group col-md-1">
					<label>Zip</label>
					<input type="text" class="form-control" ui-mask="99999" ng-model="coord.coordinatorData.home_zip">
				</div>
        <div class="form-group col-md-2">
          <label>Role</label>
          <select class="form-control" ng-model="coord.coordinatorData.user_role">
            <option value="C">Coordinator</option>
            <option value="R">Recruiter</option>
          </select>
        </div>
			</div>

			<div class="row">
				<div class="form-group col-md-4">
					<label>Phone Number</label>
					<input type="text" class="form-control" ui-mask="(999) 999-9999" ng-model="coord.coordinatorData.home_phone">
				</div>
				<div class="form-group col-md-4">
					<label>Email</label>
					<input type="email" class="form-control" ng-model="coord.coordinatorData.email">
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 text-right">
					<div class="form-group">
						<button type="button" class="btn btn-warning" ng-click="coord.actAs()">Act As This Coordinator</button>
						<button type="button" class="btn btn-danger" ng-really-message="Are you sure?" ng-really-click="coord.delete()">Delete</button>
						<button type="submit" class="btn btn-primary">Submit</button>
					</div>
				</div>
			</div>
		</form>
	</div>

	<!-- (facility_id, doctor_id, status, email, department, job_title, job_status) -->
	<div id="membership-section" class="ng-hide" ng-hide="coord.loading || coord.error || coord == null">
		<accordion close-others="false">
			<accordion-group is-open="true">
				<accordion-heading>Memberships<span class="badge pull-right" ng-bind="(coord.memberships).length"></span></accordion-heading>
				<article ng-repeat="(key,obj) in coord.memberships" class="row form-group">
					<div class="col-md-1">
						<img ng-src="{{obj.profileUrl || './images/default-avatar.png'}}" onerror="if (this.src != './images/default-avatar.png') this.src = './images/default-avatar.png';" class="img-responsive img-circle" style="width:100%" />
					</div>
					<div class="col-md-9">
						<h4><span ng-bind="obj.facility_name"></span> (<span ng-bind="appCtrl.memberStatuses[obj.status].status"></span>)</h4>
						<h5 ng-show="obj.department" ng-bind="'Department: '+obj.department"></h5>
					</div>
					<div class="col-md-2">
						<a class="btn btn-info btn-sm btn-block" ng-click="coord.openMembershipModal('membership-modal',obj)">Edit</a>
						<button class="btn btn-danger btn-sm btn-block" ng-really-message="Are you sure?" ng-really-click="coord.deleteFacilityMembership(obj.id)">Delete</button>
					</div>
					<hr />
				</article>
			</accordion-group>
		</accordion>
		<div class="row">
		<div class="col-xs-12 text-right">
				<button class="btn btn-success" ng-click="coord.openMembershipModal('membership-modal',{})">Add Membership</button
			</div>
		</div>
	</div>

</section>




<!-- (facility_id, doctor_id, status, email, department, job_title, job_status) -->
<script type="text/ng-template" id="membership-modal">
	<div class="modal-header">
		<h3 class="modal-title" ng-bind="modal.title"></h3>
	</div>
	<div class="modal-body">
		<form novalidate>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Facility</label>
					<input type="text" class="form-control" typeahead-min-length="4" typeahead-loading="loadingLocations" ng-model="modal.modalObject.facility_name" ng-required="true" typeahead="fac.facility_name as fac.facility_name for fac in modal.parentCtrl.queryFacilities($viewValue)" typeahead-on-select="modal.modalObject.facility_id = $item.id" typeahead-editable="false" />
					<i ng-show="loadingLocations" class="fa fa-2x fa-refresh"></i>
				</div>
				<div class="form-group col-xs-6">
					<label>Status</label>
					<select class="form-control" ng-model="modal.modalObject.status">
						<option value="0">Inactive</option>
						<option value="1">Active</option>
						<option value="2">What does 2 mean?</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Email</label>
					<input type="email" class="form-control" ng-model="modal.modalObject.email" />
				</div>
				<div class="form-group col-xs-6">
					<label>Department</label>
					<input type="text" class="form-control" ng-model="modal.modalObject.department" />
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Job Title</label>
					<input type="text" class="form-control" ng-model="modal.modalObject.job_title" />
				</div>
				<div class="form-group col-xs-4">
					<label>Job Status</label>
					<select class="form-control" ng-model="modal.modalObject.job_status"  ng-required="true" ng-options="js.id as js.job_status for js in modal.parentCtrl.jobStatuses"></select>
					<input type="hidden" ng-model="modal.modalObject.id" />
					<input type="hidden" ng-model="modal.modalObject.doctor_id" />
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="modal.ok()">OK</button>
		<button class="btn btn-warning" ng-click="modal.cancel()">Cancel</button>
	</div>
</script>
