<div class="row">
	<div class="col-md-12">
		<ul class="nav nav-pills">
			<li role="presentation"><a ng-click="appCtrl.goTo('/doctor/{{dr.doctorId}}')">General Info</a></li>
			<li role="presentation"><a ng-click="appCtrl.goTo('/doctor/{{dr.doctorId}}/account-info')">Account Info</a></li>
			<li role="presentation">
				<a ng-click="appCtrl.goTo('/doctor/{{dr.doctorId}}/education-and-work')">Education &amp; Work</a>
			</li>
			<li class="active"><a>Qualifications</a></li>
			<li role="presentation"><a ng-click="appCtrl.goTo('/doctor/{{dr.doctorId}}/uploads')">Uploads</a></li>
		</ul>
	</div>
</div>

<hr />

<accordion close-others="false">
	<accordion-group is-open="true">
		<accordion-heading>Clinical Evaluations<span class="badge pull-right">{{(dr.clinicalEvaluations).length}}</span></accordion-heading>
		<article ng-repeat="(key,obj) in dr.clinicalEvaluations">
			<h4>{{obj.name}}</h4>
			<div><label>Phone: </label> {{obj.phone | tel}}</div>
			<div><label>Email: </label> {{obj.email}}</div>
			<div class="text-right">
				<a class="btn btn-info" ng-click="dr.openClinicalEvaluationModal('clinical-evaluation-modal',obj)">Edit</a>
				<button class="btn btn-danger" ng-really-message="Are you sure?" ng-really-click="dr.deleteClinicalEvaluation(obj.id)">Delete</button>
				
			</div>
			<hr />
		</article>
		<div class="row">
			<div class="col-md-12 text-right">
				<button class="btn btn-primary" ng-click="dr.openClinicalEvaluationModal('clinical-evaluation-modal',{})">Add Clinical Evaluation</button>
			</div>
		</div>
	</accordion-group>
	<accordion-group is-open="true">
		<accordion-heading>Facility Affiliations<span class="badge pull-right">{{(dr.facilityAffiliations).length}}</span></accordion-heading>
		<article ng-repeat="(key,obj) in dr.facilityAffiliations">
			<h4>{{obj.facility_name}}</h4>
			<div><label>Reference: </label> {{obj.reference_name}} ({{obj.reference_title}})</div>
			<div class="text-right">
				<a class="btn btn-info" ng-click="dr.openFacilityAffiliationModal('facility-affiliation-modal',obj)">Edit</a>
				<button class="btn btn-danger" ng-really-message="Are you sure?" ng-really-click="dr.deleteFacilityAffiliation(obj.id)">Delete</button>
			</div>
			<hr />
		</article>
		<div class="row">
			<div class="col-md-12 text-right">
				<button class="btn btn-primary" ng-click="dr.openFacilityAffiliationModal('facility-affiliation-modal',{})">Add Facility Affiliation</button>
			</div>
		</div>
	</accordion-group>
	<accordion-group is-open="true">
		<accordion-heading>Medical Licenses &amp; DEA <span class="badge pull-right">{{(dr.medicalLicenses).length}}</span></accordion-heading>
		<div class="row hidden-xs hidden-sm">
			<div class="col-md-3"><label>Type</label></div>
			<div class="col-md-1"><label>State</label></div>
			<div class="col-md-2"><label>Number</label></div>
			<div class="col-md-3"><label>Expiration</label></div>
			<div class="col-md-3 text-right"><label>Actions</label></div>
		</div>
		<article ng-repeat="(key,obj) in dr.medicalLicenses" class="row">
			<div class="col-md-3">{{dr.licenseTypes[obj.type_id] || 'unk'}}</div>
			<div class="col-md-1" ng-show="obj.type_id != 1">{{obj.state || 'n/a'}}</div>
			<div class="col-md-1" ng-hide="obj.type_id != 1">n/a</div>
			<div class="col-md-2">{{obj.number}}</div>
			<div class="col-md-3">{{obj.expiration_date}}</div>
			<div class="text-right col-md-3">
				<a class="btn btn-info" ng-click="dr.openMedicalLicenseModal('medical-license-modal',obj)">Edit</a>
				<button class="btn btn-danger" ng-really-message="Are you sure?" ng-really-click="dr.deleteMedicalLicense(obj.id)">Delete</button>
			</div>
			<hr />
		</article>
		<div class="row">
			<div class="col-md-12 text-right">
				<button class="btn btn-primary" ng-click="dr.openMedicalLicenseModal('medical-license-modal',{})">Add Medical License</button>
			</div>
		</div>
	</accordion-group>
</accordion>


<script type="text/ng-template" id="clinical-evaluation-modal">
	<div class="modal-header">
		<h3 class="modal-title">{{modal.title}}</h3>
	</div>
	<div class="modal-body">
		<form novalidate>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Name</label>
					<input type="text" class="form-control" ng-model="modal.modalObject.name" />
				</div>
				<div class="form-group col-xs-6">
					<label>Criteria</label>
					<select class="form-control" ng-model="modal.modalObject.criteria">
						<option value="0">Physician with whom you have shared "call"</option>
						<option value="1">Former partner</option>
						<option value="2">Physician in a referral relationship with you</option>
						<option value="3">[Surgeon] An anesthesiologist with whom you have worked frequently during at least 6 of the last 12 months</option>
						<option value="4">[Anesthesiologist] A surgeon with whom you have worked frequently in 6 of the last 12 months</option>
						<option value="5">Faculty member or other attending physician with whom you have worked for a significant period of time</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Specialty</label>
					<select class="form-control" ng-model="modal.modalObject.specialty_id" ng-required="true" ng-options="spec.id as spec.specialty for spec in modal.parentCtrl.specialties"></select>
				</div>
				<div class="form-group col-xs-3">
					<label>Address</label>
					<input class="form-control" ng-model="modal.modalObject.address" type="text" />
				</div>
				<div class="form-group col-xs-3">
					<label>Address 2</label>
					<input class="form-control" ng-model="modal.modalObject.address2" type="text" />
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 form-group">
					<label>City</label>
					<input class="form-control" ng-model="modal.modalObject.city" type="text" />
				</div>
				<div class="col-md-4 form-group">
					<label>State</label>
					<select class="form-control" ng-model="modal.modalObject.state">
						<option value="AL">AL</option> <option value="AK">AK</option> <option value="AZ">AZ</option> <option value="AR">AR</option> <option value="CA">CA</option> <option value="CO">CO</option> <option value="CT">CT</option> <option value="DE">DE</option> <option value="DC">DC</option> <option value="FL">FL</option> <option value="GA">GA</option> <option value="HI">HI</option> <option value="ID">ID</option> <option value="IL">IL</option> <option value="IN">IN</option> <option value="IA">IA</option> <option value="KS">KS</option> <option value="KY">KY</option> <option value="LA">LA</option> <option value="ME">ME</option> <option value="MD">MD</option> <option value="MA">MA</option> <option value="MI">MI</option> <option value="MN">MN</option> <option value="MS">MS</option> <option value="MO">MO</option> <option value="MT">MT</option> <option value="NE">NE</option> <option value="NV">NV</option> <option value="NH">NH</option> <option value="NJ">NJ</option> <option value="NM">NM</option> <option value="NY">NY</option> <option value="NC">NC</option> <option value="ND">ND</option> <option value="OH">OH</option> <option value="OK">OK</option> <option value="OR">OR</option> <option value="PA">PA</option> <option value="RI">RI</option> <option value="SC">SC</option> <option value="SD">SD</option> <option value="TN">TN</option> <option value="TX">TX</option> <option value="UT">UT</option> <option value="VT">VT</option> <option value="VA">VA</option> <option value="WA">WA</option> <option value="WV">WV</option> <option value="WI">WI</option> <option value="WY">WY</option>
					</select>
				</div>
				<div class="col-md-4 form-group">
					<label>Zip Code</label>
					<input class="form-control" ng-model="modal.modalObject.zip" ui-mask="99999" type="text" />
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 form-group">
					<label>Phone</label>
					<input class="form-control" ng-model="modal.modalObject.phone" ui-mask="(999) 999-9999" type="text" />
				</div>
				<div class="col-md-4 form-group">
					<label>Fax Number</label>
					<input class="form-control" ng-model="modal.modalObject.fax" ui-mask="(999) 999-9999" type="text" />
				</div>
				<div class="col-md-4 form-group">
					<label>Email</label>
					<input class="form-control" ng-model="modal.modalObject.email" type="email" />
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="modal.ok()">OK</button>
		<button class="btn btn-warning" ng-click="modal.cancel()">Cancel</button>
	</div>
</script>

<script type="text/ng-template" id="facility-affiliation-modal">
	<div class="modal-header">
		<h3 class="modal-title">{{modal.title}}</h3>
	</div>
	<div class="modal-body">
		<form novalidate>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Staff Category</label>
					<select class="form-control" ng-model="modal.modalObject.staff_category">
						<option value="0">Active</option>
						<option value="1">Courtesy</option>
						<option value="2">Affiliate</option>
						<option value="3">Consulting</option>
						<option value="4">Community</option>
						<option value="5">Provisional</option>
						<option value="5">Telemedicine</option>
						<option value="6">Associate</option>
						<option value="8">Locum Tenens</option>
						<option value="9">Other</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Facility</label>
					<input type="text" class="form-control" typeahead-min-length="4" typeahead-loading="loadingLocations" ng-model="modal.modalObject.facility_name" ng-required="true" typeahead="fac.facility_name as fac.facility_name for fac in modal.parentCtrl.queryFacilities($viewValue)" typeahead-on-select="modal.modalObject.facility_id = $item.id;modal.modalObject.address = $item.address;modal.modalObject.city = $item.city;modal.modalObject.zip = $item.zip;modal.modalObject.state = $item.state;modal.modalObject.tel = $item.tel;modal.modalObject.fax = $item.fax;" typeahead-editable="false" />
					<i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
				</div>
				<div class="form-group col-xs-3">
					<label>Primary?</label>
					<input ng-model="modal.modalObject.is_primary" type="checkbox" ng-true-value="1" ng-false-value="0" />
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Address</label>
					<input class="form-control" ng-model="modal.modalObject.address" type="text" />
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 form-group">
					<label>City</label>
					<input class="form-control" ng-model="modal.modalObject.city" type="text" />
				</div>
				<div class="col-md-4 form-group">
					<label>State</label>
					<select class="form-control" ng-model="modal.modalObject.state">
						<option value="AL">AL</option> <option value="AK">AK</option> <option value="AZ">AZ</option> <option value="AR">AR</option> <option value="CA">CA</option> <option value="CO">CO</option> <option value="CT">CT</option> <option value="DE">DE</option> <option value="DC">DC</option> <option value="FL">FL</option> <option value="GA">GA</option> <option value="HI">HI</option> <option value="ID">ID</option> <option value="IL">IL</option> <option value="IN">IN</option> <option value="IA">IA</option> <option value="KS">KS</option> <option value="KY">KY</option> <option value="LA">LA</option> <option value="ME">ME</option> <option value="MD">MD</option> <option value="MA">MA</option> <option value="MI">MI</option> <option value="MN">MN</option> <option value="MS">MS</option> <option value="MO">MO</option> <option value="MT">MT</option> <option value="NE">NE</option> <option value="NV">NV</option> <option value="NH">NH</option> <option value="NJ">NJ</option> <option value="NM">NM</option> <option value="NY">NY</option> <option value="NC">NC</option> <option value="ND">ND</option> <option value="OH">OH</option> <option value="OK">OK</option> <option value="OR">OR</option> <option value="PA">PA</option> <option value="RI">RI</option> <option value="SC">SC</option> <option value="SD">SD</option> <option value="TN">TN</option> <option value="TX">TX</option> <option value="UT">UT</option> <option value="VT">VT</option> <option value="VA">VA</option> <option value="WA">WA</option> <option value="WV">WV</option> <option value="WI">WI</option> <option value="WY">WY</option>
					</select>
				</div>
				<div class="col-md-4 form-group">
					<label>Zip Code</label>
					<input class="form-control" ng-model="modal.modalObject.zip" ui-mask="99999" type="text" />
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Reference Name</label>
					<input class="form-control" ng-model="modal.modalObject.reference_name" type="text" />
				</div>
				<div class="form-group col-xs-6">
					<label>Reference title</label>
					<input class="form-control" ng-model="modal.modalObject.reference_title" type="text" />
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
					<label>Start Date</label>
					<div class="input-group">
	              <input readonly type="text" class="form-control" datepicker-popup="MM/dd/yyyy" ng-model="modal.modalObject.start_date" init-date="06/22/2015" is-open="modal.parentCtrl.opened['modalstart']" min-date="'01/01/1930'" max-date="'01/01/2015'" ng-required="true" close-text="Close" />
	              <span class="input-group-btn">
	                <button type="button" class="btn btn-default" ng-click="modal.parentCtrl.open($event,'modalstart')"><i class="glyphicon glyphicon-calendar"></i></button>
	              </span>
	            </div>
				</div>
					
				<div class="col-md-6">
					<label>End Date</label>
					<p class="input-group">
						<input readonly type="text" class="form-control" datepicker-popup="MM/dd/yyyy" ng-model="modal.modalObject.end_date" init-date="06/22/2015" is-open="modal.parentCtrl.opened['modalend']" min-date="'01/01/1930'" max-date="'06/22/2015'" ng-required="false" close-text="Close" />
						<span class="input-group-btn">
							<button type="button" class="btn btn-default" ng-click="modal.parentCtrl.open($event,'modalend')"><i class="glyphicon glyphicon-calendar"></i></button>
						</span>
					</p>
				</div>
			</div>
			<div class="row">
				<div class="form-group col-xs-6">
					<label>Phone</label>
					<input class="form-control" ng-model="modal.modalObject.tel" ui-mask="(999) 999-9999" type="text" />
				</div>
				<div class="form-group col-xs-6">
					<label>Fax</label>
					<input class="form-control" ng-model="modal.modalObject.fax" ui-mask="(999) 999-9999" type="text" />
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="modal.ok()">OK</button>
		<button class="btn btn-warning" ng-click="modal.cancel()">Cancel</button>
	</div>
</script>	

<script type="text/ng-template" id="medical-license-modal">
	<div class="modal-header">
		<h3 class="modal-title">{{modal.title}}</h3>
	</div>
	<div class="modal-body">
		<form novalidate name="license_form">
			<div class="row">
				<div class="col-md-6">
					<label>License Type</label>
					<select class="form-control" ng-model="modal.modalObject.type_id" ng-required="true">
						<option>-- Select Type --</option>
						<option value="0">State License</option>
						<option value="1">DEA License</option>
						<option value="2">State Ctrl Substance</option>
					</select>
				</div>
				<div class="form-group col-xs-3"  ng-show="modal.modalObject.type_id != 1">
					<label>License State</label>
					<select class="form-control" ng-model="modal.modalObject.state">
						<option value="AL">AL</option> <option value="AK">AK</option> <option value="AZ">AZ</option> <option value="AR">AR</option> <option value="CA">CA</option> <option value="CO">CO</option> <option value="CT">CT</option> <option value="DE">DE</option> <option value="DC">DC</option> <option value="FL">FL</option> <option value="GA">GA</option> <option value="HI">HI</option> <option value="ID">ID</option> <option value="IL">IL</option> <option value="IN">IN</option> <option value="IA">IA</option> <option value="KS">KS</option> <option value="KY">KY</option> <option value="LA">LA</option> <option value="ME">ME</option> <option value="MD">MD</option> <option value="MA">MA</option> <option value="MI">MI</option> <option value="MN">MN</option> <option value="MS">MS</option> <option value="MO">MO</option> <option value="MT">MT</option> <option value="NE">NE</option> <option value="NV">NV</option> <option value="NH">NH</option> <option value="NJ">NJ</option> <option value="NM">NM</option> <option value="NY">NY</option> <option value="NC">NC</option> <option value="ND">ND</option> <option value="OH">OH</option> <option value="OK">OK</option> <option value="OR">OR</option> <option value="PA">PA</option> <option value="RI">RI</option> <option value="SC">SC</option> <option value="SD">SD</option> <option value="TN">TN</option> <option value="TX">TX</option> <option value="UT">UT</option> <option value="VT">VT</option> <option value="VA">VA</option> <option value="WA">WA</option> <option value="WV">WV</option> <option value="WI">WI</option> <option value="WY">WY</option>
					</select>
				</div>
				<div class="form-group col-xs-3">
					<label>License Number</label>
					<input type="text" class="form-control" ng-model="modal.modalObject.number" />
				</div>
			</div>
			<div class="row">
				
				<div class="form-group col-xs-6">
					<label>Issue Date</label>
					<div class="input-group">
	              <input readonly type="text" class="form-control" datepicker-popup="MM/dd/yyyy" ng-model="modal.modalObject.issue_date" is-open="modal.parentCtrl.opened['modalstart']" min-date="'01/01/1980'" max-date="'06/22/2016'" ng-required="true" close-text="Close" />
	              <span class="input-group-btn">
	                <button type="button" class="btn btn-default" ng-click="modal.parentCtrl.open($event,'modalstart')"><i class="glyphicon glyphicon-calendar"></i></button>
	              </span>
					</div>
				</div>
				<div class="form-group col-xs-6">
					<label>Expiration Date</label>
					<div class="input-group">
	              <input readonly type="text" class="form-control" datepicker-popup="MM/dd/yyyy" ng-model="modal.modalObject.expiration_date" is-open="modal.parentCtrl.opened['modalend']" min-date="'01/01/1980'" max-date="'06/22/2018'" ng-required="true" close-text="Close" />
	              <span class="input-group-btn">
	                <button type="button" class="btn btn-default" ng-click="modal.parentCtrl.open($event,'modalend')"><i class="glyphicon glyphicon-calendar"></i></button>
	              </span>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<button class="btn btn-primary" ng-click="license_form.$valid && modal.ok()">OK</button>
		<button class="btn btn-warning" ng-click="modal.cancel()">Cancel</button>
	</div>
</script>